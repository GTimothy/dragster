/*!
 * Dragster - drag'n'drop library v1.0.4
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2015-04-23T22:44Z
 */
(function(e,t){e.DD=function(e){var n="is-dragging",s="is-drag-over",r="dragster-draggable",i="dragster-drag-region",o="dragster-drop-placeholder",a="dragster-temp",l="dragster-temp-container",c="dragster-is-hidden",d="dragster-replacable",u={elementSelector:".dragster-block",regionSelector:".dragster-region",replaceElements:false},f="draggable",m="data-placeholder-position",p={top:false,bottom:false},v,g,L,h,E,y,b,C,w,T,B,N,H,M,A,S,x,D,O,R,X;for(v in e){if(e.hasOwnProperty(v)){u[v]=e[v]}}C=Array.prototype.slice.call(t.querySelectorAll(u.elementSelector));g=Array.prototype.slice.call(t.querySelectorAll(u.regionSelector));if(u.replaceElements){y=t.createElement("div");y.classList.add(c);y.classList.add(l);t.body.appendChild(y)}L=function(e,t){var n=e.parentNode;if(!n||e.classList&&e.classList.contains(i)){return undefined}if(t(e)){return e}return t(n)?n:L(n,t)};O=function(e){var n=Array.prototype.slice.call(t.getElementsByClassName(e));n.forEach(function(e){e.parentNode.removeChild(e)})};R=function(e,s){g.forEach(function(e){e.removeEventListener(s,w.mousemove)});t.body.removeEventListener(s,w.mousemove);if(e){e.classList.remove(n)}O(o);O(a)};X=function(){Array.prototype.slice.call(t.getElementsByClassName(d)).forEach(function(e){e.classList.remove(d)})};A=function(){var e=t.createElement("div");e.setAttribute(f,true);e.classList.add(r);return e};x=function(){var e=t.createElement("div");e.classList.add(o);return e};S=function(){var e=t.createElement("div");e.classList.add(a);e.classList.add(c);t.body.appendChild(e);return e};H=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)};M=function(e,t){e.parentNode.insertBefore(t,e)};N=function(e){return e.classList&&e.classList.contains(i)};B=function(e){return e.classList&&e.classList.contains(r)};T=function(e){return e.classList&&e.classList.contains(o)};w={mousedown:function(e){e.preventDefault();if(e.which===3){return false}var s,r=e.type==="touchstart"?"touchmove":"mousemove";g.forEach(function(e){e.addEventListener(r,w.mousemove)});t.body.addEventListener(r,w.mousemove);b=L(e.target,B);if(!b){return false}s=b.getBoundingClientRect();h=S();h.innerHTML=b.innerHTML;h.style.width=s.width+"px";h.style.height=s.height+"px";E=h.getBoundingClientRect();b.classList.add(n)},mousemove:function(e){e.preventDefault();var n=e.changedTouches?e.changedTouches[0]:e,s=n.view?n.view.pageXOffset:0,a=n.view?n.view.pageYOffset:0,l=n.clientY+a,f=n.clientX+s,v=t.elementFromPoint(n.clientX,n.clientY),g=L(v,B),y,C,w;clearTimeout(D);h.style.top=l+25+"px";h.style.left=f-E.width/2+"px";h.classList.remove(c);if(g&&g!==b){w=x();y=g.getBoundingClientRect();C=y.height/2;X();if(!u.replaceElements){if(l-y.top<C&&!p.top){O(o);w.setAttribute(m,"top");M(g.firstChild,w)}else if(y.bottom-l<C&&!p.bottom){O(o);w.setAttribute(m,"bottom");g.appendChild(w)}}else{g.classList.add(d)}}else if(v.classList.contains(i)&&v.getElementsByClassName(r).length===0&&v.getElementsByClassName(o).length===0){w=x();v.appendChild(w)}else if(!v.classList.contains(i)){if(!u.replaceElements){O(o)}else{X()}}},mouseup:function(e){var n=u.replaceElements?d:o,r=t.getElementsByClassName(n)[0],i,a,c=e.type==="touchstart"?"touchmove":"mousemove",f;D=setTimeout(function(){R(b,c)},200);X();if(!b||!r){R(b,c);return false}i=L(r,B);i=i||r;if(b!==i){if(!u.replaceElements){f=A();f.innerHTML=b.innerHTML;a=r.getAttribute(m);if(a==="top"){M(i,f)}else{H(i,f)}b.parentNode.removeChild(b)}else{f=t.getElementsByClassName(l)[0];f.innerHTML=b.innerHTML;b.innerHTML=i.innerHTML;i.innerHTML=f.innerHTML;f.innerHTML=""}i.classList.remove(s)}R(b,c)}};C.forEach(function(e){var t=A(),n=e.parentNode;n.insertBefore(t,e);n.removeChild(e);t.appendChild(e)});t.body.addEventListener("mouseup",w.mouseup,false);t.body.addEventListener("touchend",w.mouseup,false);g.forEach(function(e){e.classList.add(i);e.addEventListener("mousedown",w.mousedown,false);e.addEventListener("mouseup",w.mouseup,false);e.addEventListener("touchstart",w.mousedown,false);e.addEventListener("touchend",w.mouseup,false)})}})(window,window.document);
