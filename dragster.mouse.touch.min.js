(function(e,t){e.DD=function(e){var n="is-dragging",r="is-drag-over",o="dragster-draggable",i="dragster-drag-region",s="dragster-drop-placeholder",a="dragster-temp",l={elementSelector:".dragster-block",regionSelector:".dragster-region"},c="draggable",d="data-placeholder-position",u={top:false,bottom:false},f,p,m,h,v,g,L,y,E,b,w,A,C,S,B,N,T;for(f in e){if(e.hasOwnProperty(f)){l[f]=e[f]}}L=Array.prototype.slice.call(t.querySelectorAll(l.elementSelector));p=Array.prototype.slice.call(t.querySelectorAll(l.regionSelector));m=function(e,t){var n=e.parentNode;if(!n||e.classList&&e.classList.contains(i)){return undefined}if(t(e)){return e}return t(n)?n:m(n,t)};T=function(e){var n=Array.prototype.slice.call(t.querySelectorAll(e));n.forEach(function(e){e.parentNode.removeChild(e)})};S=function(){var e=t.createElement("div");e.setAttribute(c,true);e.classList.add(o);return e};N=function(){var e=t.createElement("div");e.classList.add(s);return e};B=function(){var e=t.createElement("div");e.classList.add(a);t.body.appendChild(e);return e};A=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)};C=function(e,t){e.parentNode.insertBefore(t,e)};w=function(e){return e.classList&&e.classList.contains(i)};b=function(e){return e.classList&&e.classList.contains(o)};E=function(e){return e.classList&&e.classList.contains(s)};y={mousedown:function(e){e.preventDefault();var t,r=e.type==="touchstart"?"touchmove":"mousemove";p.forEach(function(e){e.addEventListener(r,y.mousemove)});g=m(e.target,b);if(!g){return false}t=g.getBoundingClientRect();h=B();h.innerHTML=g.innerHTML;h.style.width=t.width+"px";h.style.height=t.height+"px";v=h.getBoundingClientRect();g.classList.add(n)},mousemove:function(e){e.preventDefault();var n=e.changedTouches?e.changedTouches[0]:e,r=t.elementFromPoint(n.clientX,n.clientY),a=m(r,b),l,c,f;h.style.top=n.clientY+25+"px";h.style.left=n.clientX-v.width/2+"px";if(a&&a!==g){f=N();l=a.getBoundingClientRect();c=l.height/2;if(n.clientY-l.top<c&&!u.top){T("."+s);f.setAttribute(d,"top");C(a.firstChild,f)}else if(l.bottom-n.clientY<c&&!u.bottom){T("."+s);f.setAttribute(d,"bottom");a.appendChild(f)}}else if(r.classList.contains(i)&&r.querySelectorAll("."+o).length===0){f=N();r.appendChild(f)}},mouseup:function(e){var o=t.querySelector("."+s),i,l,c=e.type==="touchstart"?"touchmove":"mousemove",u;if(!g||!o){return false}g.classList.remove(n);i=m(o,b);i=i||o;if(g!==i){u=S();u.innerHTML=g.innerHTML;l=o.getAttribute(d);if(l==="top"){C(i,u)}else{A(i,u)}i.classList.remove(r);g.parentNode.removeChild(g)}p.forEach(function(e){e.removeEventListener(c,y.mousemove)});T("."+s);T("."+a)}};L.forEach(function(e){var t=S(),n=e.parentNode;n.insertBefore(t,e);n.removeChild(e);t.appendChild(e)});p.forEach(function(e){e.classList.add(i);e.addEventListener("mousedown",y.mousedown,false);e.addEventListener("mouseup",y.mouseup,false);e.addEventListener("touchstart",y.mousedown,false);e.addEventListener("touchend",y.mouseup,false)})}})(window,window.document);