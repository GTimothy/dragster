/*@preserve
 * Dragster - drag'n'drop library v1.3.1
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2016 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2016-10-17T20:30Z
 */
!function(e,t){"use strict";e.Dragster=function(n){var o,r,s,i,a,l,d,c,u,g,m,p,f,h,v,E,L,y,C,B,w,b,N,D,H,T,A,S="is-dragging",M="is-drag-over",R="dragster-draggable",O="dragster-drag-region",Y="dragster-drop-placeholder",q="dragster-temp",x="dragster-temp-container",X="dragster-is-hidden",I="dragster-replacable",P="dragster-region--drag-only",W="touchstart",k="touchmove",z="touchend",F="mousedown",j="mousemove",G="mouseup",J="top",K="bottom",Q="px",U="div",V=!1,Z=!0,$=function(){},_={elementSelector:".dragster-block",regionSelector:".dragster-region",dragOnlyRegionCssClass:P,replaceElements:V,updateRegionsHeight:Z,minimumRegionHeight:60,onBeforeDragStart:$,onAfterDragStart:$,onBeforeDragMove:$,onAfterDragMove:$,onBeforeDragEnd:$,onAfterDragEnd:$,scrollWindowOnDrag:V,dragOnlyRegionsEnabled:V,cloneElements:V},ee="draggable",te="data-placeholder-position",ne={top:V,bottom:V},oe={drag:{node:{}},drop:{node:{}},shadow:{node:{},top:0,left:0},placeholder:{node:{},position:""}},re=e.innerHeight;for(r in n)n.hasOwnProperty(r)&&(_[r]=n[r]);return N=function(){return[].slice.call(t.querySelectorAll(_.elementSelector))},D=function(e){e.forEach(function(e){var t=E(),n=e.parentNode;return n.classList.contains(R)?V:(n.insertBefore(t,e),n.removeChild(e),void t.appendChild(e))})},u=N(),s=[].slice.call(t.querySelectorAll(_.regionSelector)),_.replaceElements&&(d=t.createElement(U),d.classList.add(X),d.classList.add(x),t.body.appendChild(d)),i=function(e,t){var n=e.parentNode;if(n&&(!e.classList||!e.classList.contains(O)||e.classList.contains(P)))return t(e)?e:t(n)?n:i(n,t)},B=function(e){var n=[].slice.call(t.getElementsByClassName(e));n.forEach(function(e){e.parentNode.removeChild(e)})},w=function(e,n){n&&(s.forEach(function(e){e.removeEventListener(n,g.mousemove)}),t.body.removeEventListener(n,g.mousemove)),e&&e.classList.remove(S),[].slice.call(t.getElementsByClassName(R)).forEach(function(e){e.firstChild||e.parentNode.removeChild(e)}),B(Y),B(q),H()},b=function(){[].slice.call(t.getElementsByClassName(I)).forEach(function(e){e.classList.remove(I)})},E=function(){var e=t.createElement(U);return e.setAttribute(ee,Z),e.classList.add(R),e},y=function(){var e=t.createElement(U);return e.classList.add(Y),e},L=function(){var e=t.createElement(U);return e.classList.add(q),e.classList.add(X),e.style.position="fixed",t.body.appendChild(e),e},h=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)},v=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e)},p=function(e){return e.classList&&e.classList.contains(R)},m=function(e){return e.classList&&e.classList.contains(Y)},f=function(e){return e.classList&&e.classList.contains(_.dragOnlyRegionCssClass)},H=function(){if(_.updateRegionsHeight){var n=[].slice.call(t.getElementsByClassName(O));n.forEach(function(t){var n=[].slice.call(t.querySelectorAll(_.elementSelector)),o=_.minimumRegionHeight;n.length&&n.forEach(function(t){var n=e.getComputedStyle(t);o+=t.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}),t.style.height=o+Q})}},g={mousedown:function(e){var n,r;return e.dragster=o,_.onBeforeDragStart(e)===V||3===e.which?V:(e.preventDefault(),r=e.type===W?k:j,s.forEach(function(e){e.addEventListener(r,g.mousemove)}),t.body.addEventListener(r,g.mousemove),(c=i(e.target,p))?(n=c.getBoundingClientRect(),a=L(),a.innerHTML=c.innerHTML,a.style.width=n.width+Q,a.style.height=n.height+Q,l=a.getBoundingClientRect(),c.classList.add(S),o=oe,o.drag.node=c,o.shadow.node=a,e.dragster=o,void _.onAfterDragStart(e)):V)},mousemove:function(e){if(e.dragster=o,_.onBeforeDragMove(e)===V)return V;e.preventDefault();var n,r,s,d=e.changedTouches?e.changedTouches[0]:e,u=d.view?d.view.pageXOffset:0,g=d.view?d.view.pageYOffset:0,m=d.clientY+g,h=d.clientX+u,E=t.elementFromPoint(d.clientX,d.clientY),L=i(E,p),w=d.clientY,N=h-l.width/2,D=y(),A=!(!L||!i(L,f)),S=E.classList.contains(O),M=E.classList.contains(P),q=E.classList.contains(Y),x=E.getElementsByClassName(R).length>0,W=E.getElementsByClassName(Y).length>0;clearTimeout(C),a.style.top=w+Q,a.style.left=N+Q,a.classList.remove(X),o.shadow.top=w,o.shadow.left=N,L&&L!==c&&!A?(n=L.getBoundingClientRect(),s=n.height/2,b(),_.replaceElements?L.classList.add(I):m-n.top<s&&!ne.top?(B(Y),D.setAttribute(te,J),v(L.firstChild,D),o.placeholder.position=J):n.bottom-m<s&&!ne.bottom&&(B(Y),D.setAttribute(te,K),L.appendChild(D),o.placeholder.position=K),o.placeholder.node=D,o.drop.node=L):!S||M||x||W?S&&!M&&x&&!W?(r=E.getElementsByClassName(R),L=r[r.length-1],D.setAttribute(te,K),B(Y),L.appendChild(D),o.placeholder.position=K,o.placeholder.node=D,o.drop.node=L):S||q||(_.replaceElements?b():B(Y)):(E.appendChild(D),o.placeholder.position=K,o.placeholder.node=D,o.drop.node=E),_.scrollWindowOnDrag&&T(e),H(),_.onAfterDragMove(e)},mouseup:function(e){if(e.dragster=o,_.onBeforeDragEnd(e)===V)return V;var n,r,s,a=_.replaceElements?I:Y,l=t.getElementsByClassName(a)[0],d=!(!c||!i(c,f)),u=e.type===W?k:j,g=_.cloneElements&&d;return C=setTimeout(function(){w(c,u)},200),b(),c&&l?(n=i(l,p),n=n||l,c!==n&&(_.replaceElements||g?_.replaceElements&&!g?(s=t.getElementsByClassName(x)[0],s.innerHTML=c.innerHTML,c.innerHTML=n.innerHTML,n.innerHTML=s.innerHTML,s.innerHTML=""):!_.replaceElements&&g&&(s=c.cloneNode(!0),r=l.getAttribute(te),r===J?v(n,s):h(n,s),w(s)):(s=E(),r=l.getAttribute(te),r===J?v(n,s):h(n,s),c.firstChild&&s.appendChild(c.firstChild)),n.classList.remove(M)),w(c,u),void _.onAfterDragEnd(e)):(w(c,u),V)}},T=function(t){var n=t.changedTouches?t.changedTouches[0]:t,o=60;re-n.clientY<o?e.scrollBy(0,10):n.clientY<o&&e.scrollBy(0,-10)},A=function(){re=e.innerHeight},D(u),t.body.addEventListener(G,g.mouseup,V),t.body.addEventListener(z,g.mouseup,V),s.forEach(function(e){e.classList.add(O),e.addEventListener(F,g.mousedown,V),e.addEventListener(G,g.mouseup,V),e.addEventListener(W,g.mousedown,V),e.addEventListener(z,g.mouseup,V)}),e.addEventListener("resize",A,!1),{update:function(){D(N()),H(),A()}}}}(window,window.document);