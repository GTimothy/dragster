/*@preserve
 * Dragster - drag'n'drop library v1.3.2
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2016 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2016-10-17T20:30Z
 */
!function(e,t){"use strict";e.Dragster=function(n){var r,o,s,a,i,l,d,c,g,u,p,m,f,h,v,E,L,y,C,D,B,w,b,N,A,T,H,S,M,O,R="is-dragging",Y="is-drag-over",q="dragster-draggable",x="dragster-drag-region",F="dragster-drop-placeholder",X="dragster-temp",I="dragster-temp-container",J="dragster-is-hidden",P="dragster-replacable",W="dragster-region--drag-only",k="touchstart",z="touchmove",j="touchend",G="mousedown",K="mousemove",Q="mouseup",U="top",V="bottom",Z="px",$="div",_=!1,ee=!0,te=function(){},ne={elementSelector:".dragster-block",regionSelector:".dragster-region",dragOnlyRegionCssClass:W,replaceElements:_,updateRegionsHeight:ee,minimumRegionHeight:60,onBeforeDragStart:te,onAfterDragStart:te,onBeforeDragMove:te,onAfterDragMove:te,onBeforeDragEnd:te,onAfterDragEnd:te,onAfterDragDrop:te,scrollWindowOnDrag:_,dragOnlyRegionsEnabled:_,cloneElements:_},re="draggable",oe="data-placeholder-position",se={top:_,bottom:_},ae={drag:{node:{}},drop:{node:{}},shadow:{node:{},top:0,left:0},placeholder:{node:{},position:""},dropped:null,clonedFrom:null,clonedTo:null},ie=e.innerHeight;for(o in n)n.hasOwnProperty(o)&&(ne[o]=n[o]);return b=function(){return[].slice.call(t.querySelectorAll(ne.elementSelector))},N=function(e){e.forEach(function(e){var t=E(),n=e.parentNode;return n.classList.contains(q)?_:(n.insertBefore(t,e),n.removeChild(e),void t.appendChild(e))})},g=b(),s=[].slice.call(t.querySelectorAll(ne.regionSelector)),ne.replaceElements&&(d=t.createElement($),d.classList.add(J),d.classList.add(I),t.body.appendChild(d)),a=function(e,t){var n=e.parentNode;if(n&&(!e.classList||!e.classList.contains(x)||e.classList.contains(W)))return t(e)?e:t(n)?n:a(n,t)},D=function(e){var n=[].slice.call(t.getElementsByClassName(e));n.forEach(function(e){e.parentNode.removeChild(e)})},B=function(e,n){n&&(s.forEach(function(e){e.removeEventListener(n,u.mousemove)}),t.body.removeEventListener(n,u.mousemove)),e&&e.classList.remove(R),[].slice.call(t.getElementsByClassName(q)).forEach(function(e){e.firstChild||e.parentNode.removeChild(e)}),D(F),D(X),A()},w=function(){[].slice.call(t.getElementsByClassName(P)).forEach(function(e){e.classList.remove(P)})},E=function(){var e=t.createElement($);return e.setAttribute(re,ee),e.classList.add(q),e},y=function(){var e=t.createElement($);return e.classList.add(F),e},L=function(){var e=t.createElement($);return e.classList.add(X),e.classList.add(J),e.style.position="fixed",t.body.appendChild(e),e},h=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)},v=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e)},m=function(e){return e.classList&&e.classList.contains(q)},p=function(e){return e.classList&&e.classList.contains(F)},f=function(e){return e.classList&&e.classList.contains(ne.dragOnlyRegionCssClass)},A=function(){if(ne.updateRegionsHeight){var n=[].slice.call(t.getElementsByClassName(x));n.forEach(function(t){var n=[].slice.call(t.querySelectorAll(ne.elementSelector)),r=ne.minimumRegionHeight;n.length&&n.forEach(function(t){var n=e.getComputedStyle(t);r+=t.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}),t.style.height=r+Z})}},u={mousedown:function(e){var n,o;return e.dragster=r,ne.onBeforeDragStart(e)===_||3===e.which?_:(e.preventDefault(),o=e.type===k?z:K,s.forEach(function(e){e.addEventListener(o,u.mousemove)}),t.body.addEventListener(o,u.mousemove),(c=a(e.target,m))?(n=c.getBoundingClientRect(),i=L(),i.innerHTML=c.innerHTML,i.style.width=n.width+Z,i.style.height=n.height+Z,l=i.getBoundingClientRect(),c.classList.add(R),r=JSON.parse(JSON.stringify(ae)),r.drag.node=c,r.shadow.node=i,e.dragster=r,void ne.onAfterDragStart(e)):_)},mousemove:function(e){if(e.dragster=r,ne.onBeforeDragMove(e)===_)return _;e.preventDefault();var n,o,s,d=e.changedTouches?e.changedTouches[0]:e,g=d.view?d.view.pageXOffset:0,u=d.view?d.view.pageYOffset:0,p=d.clientY+u,h=d.clientX+g,E=t.elementFromPoint(d.clientX,d.clientY),L=a(E,m),B=d.clientY,b=h-l.width/2,N=y(),H=!(!L||!a(L,f)),S=E.classList.contains(x),M=E.classList.contains(W),O=E.classList.contains(F),R=E.getElementsByClassName(q).length>0,Y=E.getElementsByClassName(F).length>0;clearTimeout(C),i.style.top=B+Z,i.style.left=b+Z,i.classList.remove(J),r.shadow.top=B,r.shadow.left=b,L&&L!==c&&!H?(n=L.getBoundingClientRect(),s=n.height/2,w(),ne.replaceElements?L.classList.add(P):p-n.top<s&&!se.top?(D(F),N.setAttribute(oe,U),v(L.firstChild,N),r.placeholder.position=U):n.bottom-p<s&&!se.bottom&&(D(F),N.setAttribute(oe,V),L.appendChild(N),r.placeholder.position=V),r.placeholder.node=N,r.drop.node=L):!S||M||R||Y?S&&!M&&R&&!Y?(o=E.getElementsByClassName(q),L=o[o.length-1],N.setAttribute(oe,V),D(F),L.appendChild(N),r.placeholder.position=V,r.placeholder.node=N,r.drop.node=L):S||O||(ne.replaceElements?w():D(F)):(E.appendChild(N),r.placeholder.position=V,r.placeholder.node=N,r.drop.node=E),ne.scrollWindowOnDrag&&T(e),A(),ne.onAfterDragMove(e)},mouseup:function(e){if(e.dragster=r,ne.onBeforeDragEnd(e)===_)return _;var n,o=ne.replaceElements?P:F,s=t.getElementsByClassName(o)[0],i=!(!c||!a(c,f)),l=e.type===k?z:K,d=ne.cloneElements&&i;return C=setTimeout(function(){B(c,l)},200),w(),c&&s?(n=a(s,m),n=n||s,c!==n&&(ne.replaceElements||d?ne.replaceElements&&!d?(e.dragster=M(e.dragster,n),ne.onAfterDragDrop(e)):!ne.replaceElements&&d&&(e.dragster=O(e.dragster,s,n),ne.onAfterDragDrop(e)):(e.dragster=S(e.dragster,s,n),ne.onAfterDragDrop(e)),n.classList.remove(Y)),B(c,l),void ne.onAfterDragEnd(e)):(B(c,l),_)}},S=function(e,t,n){var r=E(),o=t.getAttribute(oe);return o===U?v(n,r):h(n,r),c.firstChild&&r.appendChild(c.firstChild),e.dropped=r,e},M=function(e,n){var r=t.getElementsByClassName(I)[0];return r.innerHTML=c.innerHTML,c.innerHTML=n.innerHTML,n.innerHTML=r.innerHTML,r.innerHTML="",e.dropped=r,e},O=function(e,t,n){var r=c.cloneNode(!0),o=t.getAttribute(oe);return o===U?v(n,r):h(n,r),B(r),e.clonedFrom=c,e.clonedTo=r,e},T=function(t){var n=t.changedTouches?t.changedTouches[0]:t,r=60;ie-n.clientY<r?e.scrollBy(0,10):n.clientY<r&&e.scrollBy(0,-10)},H=function(){ie=e.innerHeight},N(g),t.body.addEventListener(Q,u.mouseup,_),t.body.addEventListener(j,u.mouseup,_),s.forEach(function(e){e.classList.add(x),e.addEventListener(G,u.mousedown,_),e.addEventListener(Q,u.mouseup,_),e.addEventListener(k,u.mousedown,_),e.addEventListener(j,u.mouseup,_)}),e.addEventListener("resize",H,!1),{update:function(){N(b()),A(),H()}}}}(window,window.document);