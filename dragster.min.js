/*@preserve
 * Dragster - drag'n'drop library v1.4.1
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2017 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2017-02-07T16:30Z
 */
!function(e,t){"use strict";e.Dragster=function(n){var r,a,o,s,l,d,i,c,g,u,m,p,h,f,v,E,L,C,y,w,D,b,B,T,H,M,N,P,R,S,I="dragster-",A="is-dragging",O="is-drag-over",Y=I+"draggable",X=I+"drag-region",q=I+"drop-placeholder",x=I+"temp",F=x+"-container",U=I+"is-hidden",k=I+"replacable",J="touchstart",W="touchmove",j="touchend",z="mousedown",G="mousemove",K="mouseup",Q="top",V="bottom",Z="px",$="div",_=!1,ee=!0,te=null,ne=function(){},re={elementSelector:".dragster-block",regionSelector:".dragster-region",dragHandleCssClass:_,dragOnlyRegionCssClass:I+"region--drag-only",replaceElements:_,updateRegionsHeight:ee,minimumRegionHeight:60,onBeforeDragStart:ne,onAfterDragStart:ne,onBeforeDragMove:ne,onAfterDragMove:ne,onBeforeDragEnd:ne,onAfterDragEnd:ne,onAfterDragDrop:ne,scrollWindowOnDrag:_,dragOnlyRegionsEnabled:_,cloneElements:_,wrapDraggableElements:ee,shadowElementUnderMouse:_},ae={top:_,bottom:_},oe={drag:{node:te},drop:{node:te},shadow:{node:te,top:0,left:0},placeholder:{node:te,position:te},dropped:te,clonedFrom:te,clonedTo:te},se={},le=e.innerHeight,de=Math.floor(65536*(1+Math.random())).toString(16);for(r in n)n.hasOwnProperty(r)&&(re[r]=n[r]);return b=function(){return[].slice.call(t.querySelectorAll(re.elementSelector))},B=function(e){return re.wrapDraggableElements===_?(console.warn("You have disabled the default behavior of wrapping the draggable elements. If you want Dragster.js to work properly you still will have to do this manually.\n\nMore info: https://github.com/sunpietro/dragster/blob/master/README.md#user-content-wrapdraggableelements---boolean"),_):void e.forEach(function(e){var t=v(),n=e.parentNode;return n.classList.contains(Y)?_:(n.insertBefore(t,e),n.removeChild(e),void t.appendChild(e))})},c=b(),a=[].slice.call(t.querySelectorAll(re.regionSelector)),re.replaceElements&&(d=t.createElement($),d.classList.add(U),d.classList.add(F),t.body.appendChild(d)),o=function(e,t){var n=e.parentNode;if(n&&(!e.classList||!e.classList.contains(X)||e.classList.contains(re.dragOnlyRegionCssClass)))return t(e)?e:t(n)?n:o(n,t)},y=function(e){var n=[].slice.call(t.getElementsByClassName(e));n.forEach(function(e){e.dataset.dragsterId===de&&e.parentNode.removeChild(e)})},w=function(e,n){n&&(a.forEach(function(e){e.removeEventListener(n,g.mousemove)}),t.body.removeEventListener(n,g.mousemove)),e&&e.classList.remove(A),[].slice.call(t.getElementsByClassName(Y)).forEach(function(e){e.firstChild||e.parentNode.removeChild(e)}),y(q),y(x),T()},D=function(){[].slice.call(t.getElementsByClassName(k)).forEach(function(e){e.classList.remove(k)})},v=function(){var e=t.createElement($);return e.classList.add(Y),e.dataset.dragsterId=de,e},L=function(){var e=t.createElement($);return e.classList.add(q),e.dataset.dragsterId=de,e},E=function(){var e=t.createElement($);return e.classList.add(x),e.classList.add(U),e.style.position="fixed",e.dataset.dragsterId=de,t.body.appendChild(e),e},h=function(e,t){if(e&&e.parentNode){var n=re.wrapDraggableElements===_?e:e.nextSibling;e.parentNode.insertBefore(t,n)}},f=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e)},m=function(e){return e.classList&&e.classList.contains(Y)&&e.dataset.dragsterId===de},u=function(e){return e.classList&&e.classList.contains(q)},p=function(e){return e.classList&&e.classList.contains(re.dragOnlyRegionCssClass)},T=function(){if(re.updateRegionsHeight){var n=[].slice.call(t.getElementsByClassName(X));n.forEach(function(t){var n=[].slice.call(t.querySelectorAll(re.elementSelector)),r=re.minimumRegionHeight;n.length&&(n.forEach(function(t){var n=e.getComputedStyle(t);r+=t.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}),t.style.height=r+Z)})}},g={mousedown:function(e){if(re.dragHandleCssClass&&("string"!=typeof re.dragHandleCssClass||!e.target.classList.contains(re.dragHandleCssClass)))return!1;var n,r,d=e.changedTouches?e.changedTouches[0]:e;return se=JSON.parse(JSON.stringify(oe)),e.dragster=se,re.onBeforeDragStart(e)===_||3===e.which?_:(e.preventDefault(),r=e.type===J?W:G,a.forEach(function(e){e.addEventListener(r,g.mousemove)}),t.body.addEventListener(r,g.mousemove),(i=o(e.target,m))?(n=i.getBoundingClientRect(),R=n.left-d.clientX,S=n.top-d.clientY,s=E(),s.innerHTML=i.innerHTML,s.style.width=n.width+Z,s.style.height=n.height+Z,s.dataset.dragsterId=de,l=s.getBoundingClientRect(),i.classList.add(A),se.drag.node=i,se.shadow.node=s,e.dragster=se,void re.onAfterDragStart(e)):_)},mousemove:function(e){if(e.dragster=se,re.onBeforeDragMove(e)===_||!l)return _;e.preventDefault();var n=e.changedTouches?e.changedTouches[0]:e,r=n.view?n.view.pageXOffset:0,a=n.view?n.view.pageYOffset:0,d=n.clientY+a,c=n.clientX+r,g=t.elementFromPoint(n.clientX,n.clientY),u=o(g,m),h=re.shadowElementUnderMouse?n.clientY+S:n.clientY,f=re.shadowElementUnderMouse?c+R:c-l.width/2,v=se.drag.node&&se.drag.node.dataset,E=!(!u||!o(u,p)),L=g.dataset.dragsterId===de,y=g.classList.contains(X)&&L,w=g.classList.contains(re.dragOnlyRegionCssClass)&&L,D=g.classList.contains(q),b=g.getElementsByClassName(Y).length>0,B=g.getElementsByClassName(q).length>0;clearTimeout(C),s.style.top=h+Z,s.style.left=f+Z,s.classList.remove(U),se.shadow.top=h,se.shadow.left=f,v||y||D?u&&u!==i&&!E?(P.removePlaceholders(),P.addPlaceholderOnTarget(u,d,a)):!y||w||b||B?y&&!w&&b&&!B&&(P.removePlaceholders(),P.addPlaceholderInRegionBelowTargets(g)):(P.removePlaceholders(),P.addPlaceholderInRegion(g)):P.removePlaceholders(),re.scrollWindowOnDrag&&H(e),T(),re.onAfterDragMove(e)},mouseup:function(e){if(e.dragster=se,re.onBeforeDragEnd(e)===_)return _;var n,r=re.replaceElements?k:q,a=t.getElementsByClassName(r)[0],s=!(!i||!o(i,p)),l=e.type===J?W:G,d=re.cloneElements&&s;return C=setTimeout(function(){w(i,l)},200),D(),i&&a?(n=o(a,m),n=n||a,i!==n&&(re.replaceElements||d?re.replaceElements&&!d?(e.dragster=N.replaceElements(e.dragster,n),re.onAfterDragDrop(e)):!re.replaceElements&&d&&(e.dragster=N.cloneElements(e.dragster,a,n),re.onAfterDragDrop(e)):(e.dragster=N.moveElement(e.dragster,a,n),re.onAfterDragDrop(e)),n.classList.remove(O)),w(i,l),void re.onAfterDragEnd(e)):(w(i,l),_)}},P={addPlaceholderOnTarget:function(e,t,n){var r=e.getBoundingClientRect(),a=L(),o=r.height/2;D(),re.replaceElements?e.classList.add(k):t-n-r.top<o&&!ae.top?(y(q),a.dataset.placeholderPosition=Q,f(e.firstChild,a),se.placeholder.position=Q):r.bottom-(t-n)<o&&!ae.bottom&&(y(q),a.dataset.placeholderPosition=V,e.appendChild(a),se.placeholder.position=V),se.placeholder.node=a,se.drop.node=e},addPlaceholderInRegion:function(e){var t=L();e.appendChild(t),se.placeholder.position=V,se.placeholder.node=t,se.drop.node=e},addPlaceholderInRegionBelowTargets:function(e){var t=[].slice.call(e.getElementsByClassName(Y)),n=t.filter(function(e){return e.dataset.dragsterId===de}),r=n[n.length-1],a=L();a.dataset.placeholderPosition=V,y(q),r.appendChild(a),se.placeholder.position=V,se.placeholder.node=a,se.drop.node=r},removePlaceholders:function(){re.replaceElements?D():y(q)}},N={moveElement:function(e,t,n){var r=re.wrapDraggableElements===_?i:v(),a=t.dataset.placeholderPosition;return a===Q?f(n,r):re.wrapDraggableElements===_?h(r,n):h(n,r),i.firstChild&&re.wrapDraggableElements===ee&&r.appendChild(i.firstChild),e.dropped=r,e},replaceElements:function(e,n){var r=t.getElementsByClassName(F)[0];return r.innerHTML=i.innerHTML,i.innerHTML=n.innerHTML,n.innerHTML=r.innerHTML,r.innerHTML="",e.dropped=r,e},cloneElements:function(e,t,n){var r=i.cloneNode(!0),a=t.dataset.placeholderPosition;return a===Q?f(n,r):h(n,r),w(r),e.clonedFrom=i,e.clonedTo=r,e}},H=function(t){var n=t.changedTouches?t.changedTouches[0]:t,r=60;le-n.clientY<r?e.scrollBy(0,10):n.clientY<r&&e.scrollBy(0,-10)},M=function(){le=e.innerHeight},B(c),t.body.addEventListener(K,g.mouseup,_),t.body.addEventListener(j,g.mouseup,_),a.forEach(function(e){e.classList.add(X),e.dataset.dragsterId=de,e.addEventListener(z,g.mousedown,_),e.addEventListener(K,g.mouseup,_),e.addEventListener(J,g.mousedown,_),e.addEventListener(j,g.mouseup,_)}),e.addEventListener("resize",M,!1),{update:function(){c=b(),B(c),T(),M()}}}}(window,window.document);